# <a id="welcome"></a>欢迎使用 PhonAcq Assistant

**PhonAcq Assistant (音韵习得实验助手)** 是一款专为语言学研究者、教师和语音爱好者设计的集成化桌面应用程序。它致力于将繁琐的语音数据采集、语料构建和数据管理流程变得简单、高效和规范化。

本手册将详细介绍程序的各项功能和最佳实践，希望能帮助您快速上手并充分利用它的潜力。请使用左侧的目录来导航至您感兴趣的章节。

---

## <a id="workflow"></a>一、核心工作流程

本程序支持多种数据采集范式，您可以根据研究需求选择合适的流程。

#### 通用流程

1.  **准备语料**:
    *   对于文本朗读任务，前往 `语料管理 -> Excel 转换器` 创建或转换标准词表 (`.xlsx` -> `.py`)，或使用 `语料管理 -> 词表编辑器` 直接编辑 `.py` 格式的标准词表。
    *   对于图文采集任务，前往 `方言研究 -> 图文词表编辑` 创建或编辑图文词表 (`.py`)，并确保图片资源放置在与词表同名的子文件夹内。
2.  **开始采集**:
    *   **口音采集**: `数据采集 -> 口音采集会话`
    *   **语音包录制**: `数据采集 -> 语音包录制`
    *   **方言图文采集**: `方言研究 -> 图文采集` (您需要先准备好图文词表)
3.  **管理数据**: 前往 `语料管理 -> 数据管理器`，在这里您可以浏览、试听、重命名、删除已录制的音频数据和会话文件夹。
4.  **实用工具**:
    *   **拼音转IPA**: `实用工具 -> 拼音转IPA`，辅助进行音标转写。
5.  **程序设置**: 在 `系统与帮助 -> 程序设置` 中可以自定义程序行为，如主题、默认路径、音频参数、侧边栏宽度等。

<div class="tip">
<strong>语音包提示音 (可选但推荐)</strong>: 对于任何一种采集范式，如果您需要高质量、统一的真人提示音，都可以先前往 <code>数据采集 -> 语音包录制</code> 页面，为您的标准词表录制语音包。在“口音采集会话”中，程序会优先使用您录制的语音包作为提示音。
</div>

---

## <a id="features"></a>二、功能模块详解

### <a id="feature-accent"></a>口音采集会话
**路径**: `数据采集 -> 口音采集会话`

这是进行**文本到语音**实验的核心界面，适用于标准的朗读任务、最小音对测试、句子复述等场景。

*   **会话前**: 您需要先选择一个 `.py` 格式的**标准词表**，并为被试者命名。
*   **会话中**: 程序会逐一呈现词条，被试者根据提示音和屏幕文字进行跟读。您可以随时调整“随机/顺序”和“部分/完整”的呈现模式。
*   **快捷键**: 选中列表项后，按 `Enter` 或双击可重听提示音。
*   **状态保持**: 会话一旦开始，即使切换到其他顶级标签页，其状态（包括词表、被试者信息、录制进度）都会被保留，直到您点击“结束当前会话”。

### <a id="feature-voicebank"></a>语音包录制
**路径**: `数据采集 -> 语音包录制`

此功能用于研究者自己录制一套标准的、高质量的提示音，以替代在线TTS。

*   **操作逻辑**: 加载一个标准词表，然后逐一选中词条，通过**按住并松开**“录音”按钮或键盘的 `Enter` 键来完成录制。
*   **文件关联**: 录制好的音频会自动与词表关联。当“口音采集会话”使用这个词表时，会优先播放您录制的音频。
*   **状态保持**: 与口音采集类似，录制会话的状态也会被保留，直到您手动结束。

### <a id="feature-dialect-visual"></a>方言图文采集
**路径**: `方言研究 -> 图文采集`

这是一个强大的功能，专为需要**视觉刺激**的方言调查、田野调查或儿童语言习得研究设计。

*   **核心逻辑**: 向被试者展示一张图片，并根据文字提示，请他们用方言描述图片内容或说出图中物体的名称，然后录下他们的语音。
*   **图片缩放与拖动**: 您可以使用鼠标滚轮（或触摸板双指手势）对图片进行**缩放**，并用鼠标左键**拖动**图片以查看细节。
*   **备注显隐**: 每个项目都可以附带研究者可见的“备注”（例如，提示需要关注的语言现象）。这些备注可以通过右侧的开关控制显示或隐藏，不会被被试者看到。
*   **词表与资源**: 此功能使用专属的“图文词表”。所有图片资源都应放在与图文词表 `.py` 文件同名的文件夹下（例如，若词表为 `village_life.py`，则图片应在 `dialect_visual_wordlists/village_life/` 目录下）。

### <a id="feature-corpus-mgmt"></a>语料管理与编辑
所有用于创建和编辑语料的工具都集中在这里。

#### Excel 转换器
**路径**: `语料管理 -> Excel 转换器`

**强烈推荐**使用此功能来创建您的词表。它提供多种预设模板，支持多语言，并且有详细的转换报告。

#### 词表编辑器
**路径**: `语料管理 -> 词表编辑器`

用于直接编辑 `.py` 格式的**标准词表**（用于口音采集和语音包录制）。它支持带国旗图标的语言选择，并有撤销/重做、删除、保存等全套快捷键支持。

#### 图文词表编辑器
**路径**: `方言研究 -> 图文词表编辑`

这是为“方言图文采集”功能配套的编辑器。您可以在这里创建和管理图文词表的项目列表。

*   **智能检测**: 核心功能！在您填入“项目ID”后，可以点击“自动检测图片”按钮。如果勾选了“智能检测”，它会忽略大小写和符号差异，模糊匹配并自动填充最相似的图片文件名，极大提高效率。
*   **文件选择**: 双击“图片文件路径”单元格，可以直接弹出文件管理器让您选择图片。路径会自动处理为相对于词表图片文件夹的相对路径。

### <a id="feature-settings"></a>系统设置
**路径**: `系统与帮助 -> 程序设置`

在这里，您可以对程序的各方面进行个性化配置，包括UI主题、默认路径、音频参数、TTS语言、以及侧边栏宽度等。所有设置都会自动保存。

---

## <a id="advanced"></a>三、高级技巧与最佳实践

### <a id="tip-wordlist"></a>设计高效的词表
无论是标准词表还是图文词表，良好的设计都至关重要。

*   **ID 命名**: 为您的项目ID（或标准词表中的单词）使用清晰、规范的命名（例如，使用下划线代替空格），因为它们会直接用作音频文件名。
*   **文件组织**:
    *   **标准词表**: `.py` 文件直接放在 `word_lists/` 目录下。
    *   **图文词表**: `.py` 文件放在 `dialect_visual_wordlists/` 目录下。**所有相关的图片都应放在 `dialect_visual_wordlists/` 目录下一个与该 `.py` 文件同名的子文件夹中**。例如，如果图文词表是 `farm_scenes.py`，则其图片应位于 `dialect_visual_wordlists/farm_scenes/` 文件夹内。编辑器会自动处理相对路径。

### <a id="tip-backup"></a>数据备份与迁移
您的所有工作都是以普通文件的形式存储的，备份和迁移非常简单。您只需要定期备份以下文件夹即可：

*   `word_lists/` (标准词表)
*   `dialect_visual_wordlists/` (图文词表及图片)
*   `audio_record/` (所有语音包和方言图文录音)
*   `Results/` (所有口音采集会话数据)
*   `config/settings.json` (您的个人设置)

### <a id="tip-theme"></a>自定义主题
您可以参考 `themes` 文件夹下的 `.qss` 文件，创建自己的样式表，并放入该文件夹，重启程序后即可在设置中选择。

---

## <a id="faq"></a>四、常见问题 (FAQ)

### <a id="faq-install"></a>安装与环境问题
**问：为什么提示“依赖库缺失”？**
答：请根据提示运行 `pip install ...` 命令来安装所有必需的Python库。特别是新功能可能需要 `thefuzz` 和 `python-Levenshtein`（用于图文词表编辑器的智能检测），以及 `markdown`（用于显示本帮助文档）。

### <a id="faq-usage"></a>功能使用问题
**问：为什么图文采集时提示“找不到图片”？**
答：请检查：
1.  您的图片是否放在了与图文词表 `.py` 文件同名的子文件夹中？例如，如果词表是 `my_visual_list.py`，图片应在 `dialect_visual_wordlists/my_visual_list/` 里面。
2.  图文词表中的 `image_path` 字段是否正确填写了图片的文件名（可以带或不带子目录，但必须是相对于那个同名子文件夹的路径，例如 `subdir/image.png` 或 `image.png`）？

**问：为什么“智能检测”没有反应？**
答：请确保您已经通过 `pip install thefuzz python-Levenshtein` 安装了模糊匹配库。

---

## <a id="about"></a>五、关于与致谢
**PhonAcq Assistant** 的开发旨在为语言学研究社区提供一个现代化、开源、易用的工具，以促进学术研究的效率和数据的规范性。

感谢所有为此项目提供建议和反馈的用户！