# PhonAcq Assistant (风纳客)

<p align="center">
  <img src="assets/Splash.png" width="600" alt="PhonAcq Assistant Logo">
</p>

<p align="center">
  <strong>一款为语言学研究者设计的集成化桌面应用程序，旨在简化和规范语音数据的采集与管理流程。</strong>
</p>

<p align="center">
    <a href="#-功能特性">功能特性</a> •
    <a href="#-安装与运行">安装与运行</a> •
    <a href="#-快速入门">快速入门</a> •
    <a href="#-模块详解">模块详解</a> •
    <a href="#-自定义与扩展">自定义与扩展</a> •
    <a href="#-常见问题解答-qa">常见问题</a>
</p>

---
## 注意
**本项目大部分代码以及 README 由 Gemini 2.5 pro 贡献。**

## 界面截图
<div align="center">
  <div style="display: inline-block; width: 48%; vertical-align: top; margin: 10px;">
    <img src="assets/help/Textgrid标注及元音分析.png" width="100%" alt="TextGrid标注及元音分析界面">
    <p><strong>TextGrid标注及元音分析界面</strong><br><em>展示了与TextGrid文件集成的元音空间图绘制器，以及标注数据的可视化。</em></p>
  </div>
  <div style="display: inline-block; width: 48%; vertical-align: top; margin: 10px;">
    <img src="assets/help/词表编辑界面.png" width="100%" alt="词表编辑界面">
    <p><strong>词表编辑界面</strong><br><em>用户可以在这里创建、修改和管理项目的词表数据。</em></p>
  </div>
</div>

<div align="center">
  <div style="display: inline-block; width: 48%; vertical-align: top; margin: 10px;">
    <img src="assets/help/图文采集界面.png" width="100%" alt="图文采集界面">
    <p><strong>图文采集界面</strong><br><em>支持结合图片进行语音采集，适用于方言研究等场景。</em></p>
  </div>
  <div style="display: inline-block; width: 48%; vertical-align: top; margin: 10px;">
    <img src="assets/help/音频分析.png" width="100%" alt="音频分析界面">
    <p><strong>音频分析界面</strong><br><em>提供波形图、语谱图和声学参数的可视化分析功能。</em></p>
  </div>
</div>

<div align="center">
  <div style="display: inline-block; width: 48%; vertical-align: top; margin: 10px;">
    <img src="assets/help/音频管理界面.png" width="100%" alt="音频管理界面">
    <p><strong>音频管理界面</strong><br><em>集中管理项目中的所有音频数据，支持批量操作。</em></p>
  </div>
  <div style="display: inline-block; width: 48%; vertical-align: top; margin: 10px;">
    <img src="assets/help/主界面及插件管理.png" width="100%" alt="主界面及插件管理">
    <p><strong>主界面及插件管理</strong><br><em>展示了应用程序的核心布局以及插件管理对话框。</em></p>
  </div>
</div>


## 📖 项目简介

**PhonAcq Assistant (风纳客)** 诞生于解决语言学（特别是音韵学、方言学和第二语言习得领域）研究中常见的数据采集痛点。传统的实验流程往往涉及多个独立的软件、繁琐的文件管理和易错的手动操作。本项目旨在将**语料构建、数据采集、数据管理和实用工具**整合到一个统一、直观、高效的图形化平台中，让研究者能更专注于实验设计与数据分析本身。

无论您是进行田野调查、课堂实验，还是为个人项目构建语料库，PhonAcq Assistant 都将是您强大的研究伙伴。

## ✨ 功能特性

*   **🎙️ 多范式采集**: 支持标准的**文本-音频**采集（用于跟读、最小音对测试）和创新的**图文-音频**采集（用于方言调查、看图说话）。
*   **📋 强大的语料管理**:
    *   **JSON 优先**: 使用行业标准的 `.json` 格式作为词表文件，安全、通用且易于编辑。
    *   **内置编辑器**: 为标准词表和图文词表提供独立的、功能完备的内置编辑器，支持撤销/重做、批量操作和完整的快捷键。
    *   **文件管理**: 编辑器内置文件列表管理，支持创建副本、删除和在文件浏览器中定位。
    *   **智能辅助**: 图文词表编辑器支持通过模糊匹配自动关联图片与项目ID。
*   **🎧 灵活的提示音系统**:
    *   支持**在线TTS**（文本转语音）自动生成提示音，并能根据文本内容自动检测语言。
    *   支持用户录制**高质量真人语音包**，程序将优先使用，保证音质和统一性。
*   **🔬 丰富的实验控制**:
    *   支持**随机**或**顺序**呈现词条。
    *   支持对分组词条进行**完整测试**或**部分抽样**。
    *   图文采集模式下，支持**动态显示/隐藏**文字描述和研究者备注。
*   **波形可视化与编辑**:
    *   在数据采集和管理模块中，集成**实时波形预览**，直观反馈录音质量。
    *   数据管理器中提供基于波形的**精准裁切**和多文件**连接**功能。
*   **🛠️ 实用的内置工具**:
    *   **拼音转IPA**: 内置强大的转换工具，支持多种IPA方案，并能**自动处理复杂的普通话连续音变**。
    *   **格式转换器**: 支持在 `JSON`, `Excel`, `CSV` 等多种格式之间进行无缝双向转换。
    *   **速记卡**: 集成间隔重复算法，将任何词表转化为一个智能化的学习和复习工具。
*   **🎨 高度可定制化**:
    *   **主题系统**: 支持通过QSS样式表完全自定义程序外观，并能**自动适配图标和绘图颜色**。
    *   **参数设置**: 可自由配置音频参数、默认路径、TTS语言等。
*   **🚀 极致的用户体验**:
    *   **瞬时启动画面**: 双击程序后立即出现启动画面并显示真实加载进度，告别“白屏”等待。
    *   **非阻塞操作**: 所有耗时任务均在后台运行，确保界面始终流畅响应。

## 📥 安装与运行

### 1. 对于普通用户 (使用打包好的可执行文件)

1.  前往本项目的 [Releases](https://github.com/YourUsername/PhonAcq-Assistant/releases) 页面 (请替换为您的仓库链接)。
2.  下载最新版本的压缩包（例如 `PhonAcq-Assistant-vX.X-Windows.zip`）。
3.  解压到一个您喜欢的位置。
4.  双击文件夹内的 `PhonAcq_Assistant.exe` (或类似名称的) 可执行文件即可运行。

### 2. 对于开发者 (从源码运行)

1.  **安装 Git 和 Python**: 确保您的电脑上已安装 Git 和 Python (推荐 3.10+)。

2.  **克隆仓库**:
    ```bash
    git clone https://github.com/YourUsername/PhonAcq-Assistant.git
    cd PhonAcq-Assistant
    ```

3.  **创建并激活虚拟环境 (推荐)**:
    ```bash
    # 创建虚拟环境
    python -m venv venv
    # 激活 (Windows)
    .\venv\Scripts\activate
    # 激活 (macOS/Linux)
    source venv/bin/activate
    ```

4.  **安装依赖**:
    ```bash
    pip install -r requirements.txt
    ```

5.  **运行程序**:
    ```bash
    python Dev.py
    ```

## 🚀 快速入门

一个最快体验核心功能的流程如下：

1.  **启动程序**，进入 `数据准备 -> 通用词表编辑器` 标签页。
2.  点击“新建单词表”按钮，在表格中输入几行测试数据（例如：组别1，单词hello；组别1，单词world）。
3.  点击“保存”按钮，将其命名为 `my_first_list.json`。
4.  进入 `数据采集 -> 标准朗读采集` 标签页。
5.  在“选择单词表”下拉框中，选择刚刚创建的 `my_first_list.json`。
6.  在“被试者名称”中输入 `test_user`。
7.  点击“开始新会话”。程序会自动使用在线TTS生成提示音。
8.  准备就绪后，点击“开始录制”，根据提示音和屏幕文字朗读并录音。
9.  完成几个词条后，点击“结束当前会话”。
10. 进入 `语料管理 -> 数据管理器` 标签页。
11. 在左侧“数据源”中选择“标准朗读采集 (新)”，然后在下方的项目列表中点击 `test_user`。右侧表格就会显示您刚刚录制的音频文件，双击即可试听。

恭喜您！您已经完成了一次基本的数据采集流程。

## 🧩 模块详解

*   **数据采集**:
    *   `标准朗读采集`: 进行标准的“听-说”范式实验。
    *   `看图说话采集`: 进行“看-说”范式实验，通过图片引导自然话语。
    *   `提示音录制`: 录制高质量的真人提示音，以替代TTS。
*   **数据准备**:
    *   `通用词表编辑器`: 创建和编辑用于标准采集的 `.json` 词表。
    *   `图文词表编辑器`: 创建和编辑包含图片、提示和备注的图文 `.json` 词表。
    *   `格式转换器`: 在 JSON, Excel, CSV 等格式间自由转换词表。
*   **语料管理**:
    *   `数据管理器`: 浏览、试听、管理所有采集到的音频数据，并支持裁切、合并等编辑操作。
    *   `日志查看器`: 以结构化视图审查实验过程日志，或分析速记卡学习进度。
*   **实用工具**:
    *   `拼音转IPA`: 将汉字转换为带有智能音变分析的国际音标。
    *   `TTS 工具`: 批量将文本词条转换为语音文件。
    *   `速记卡`: 基于间隔重复算法的智能化学习和复习工具。
*   **系统与帮助**:
    *   `程序设置`: 配置程序的主题、路径、音频参数等。
    *   `帮助文档`: 详细的内置使用指南。

## 🎨 自定义与扩展

*   **自定义主题**: 您可以创建自己的 `.qss` 样式表，并将其放入 `themes/` 文件夹，即可在设置中选择。要自定义图标，请参考帮助文档中的“主题包”说明。
*   **添加词表**: 直接在 `word_lists/` 或 `dialect_visual_wordlists/` 文件夹下创建新的 `.json` 文件。使用内置的编辑器或您喜欢的文本/代码编辑器均可。
*   **扩展功能**: 得益于模块化设计，您可以轻松地在 `modules/` 文件夹下创建新的 `.py` 模块来添加全新功能。只需在主程序 `Dev.py` 中进行简单的依赖注入和集成即可。

## ❓ 常见问题解答 (Q&A)

**Q1: 双击程序后没反应或一闪而过？**
*   **A:** 您的安全软件（如Windows Defender）可能误拦截了程序。请检查其“保护历史记录”，将程序标记为“允许”，并将整个程序文件夹添加到“排除项”中。

**Q2: 点击“开始新会话”后，长时间卡在“正在生成TTS”？**
*   **A:** TTS功能需要连接Google服务器。请检查您的网络连接。最佳实践是使用“提示音录制”模块预先录制真人语音包，这样程序将不再需要网络。

**Q3: 录制的声音太小或太大（有破音）？**
*   **A:** 请先调整您**操作系统**的麦克风输入音量。然后再到本程序的 `程序设置 -> 音频与录音` 中，微调“录音音量增益”滑块。

**Q4: 如何备份或迁移我的所有数据？**
*   **A:** PhonAcq Assistant 是“绿色”便携软件。只需**完整地复制整个程序文件夹**到您的备份位置或新电脑上即可。所有的设置、词表、录音和学习进度都会被完整保留。

**Q5: 转换器无法识别我的Excel文件？**
*   **A:** 请先在“格式转换器”模块中**生成一个官方模板**，然后将您的数据复制到模板对应的列中，再进行转换。这是确保列名和格式正确的最佳方法。

## ❤️ 参与贡献

我们欢迎任何形式的贡献！无论是提交 bug 报告、建议新功能，还是直接贡献代码。

1.  **Fork** 本仓库。
2.  创建一个新的分支 (`git checkout -b feature/AmazingFeature`)。
3.  进行您的修改。
4.  提交您的更改 (`git commit -m 'Add some AmazingFeature'`)。
5.  将您的分支推送到远程仓库 (`git push origin feature/AmazingFeature`)。
6.  创建一个 **Pull Request**。

## 📜 许可证 (License)

本项目采用 [MIT 许可证](LICENSE.txt)。
