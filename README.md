# PhonAcq Assistant (音韵习得实验助手)

<p align="center">
  <img src="assets/Splash.png" width="300" alt="PhonAcq Assistant Logo">
</p>

<p align="center">
  <strong>一款为语言学研究者设计的集成化桌面应用程序，旨在简化和规范语音数据的采集与管理流程。</strong>
</p>

<p align="center">
    <a href="#-features">功能特性</a> •
    <a href="#-installation">安装与运行</a> •
    <a href="#-quick-start">快速入门</a> •
    <a href="#-modules-overview">模块详解</a> •
    <a href="#-customization">自定义与扩展</a> •
    <a href="#-contribution">参与贡献</a>
</p>

---

## 📖 项目简介

**PhonAcq Assistant** 诞生于解决语言学（特别是音韵学、方言学和第二语言习得领域）研究中常见的数据采集痛点。传统的实验流程往往涉及多个独立的软件、繁琐的文件管理和易错的手动操作。本项目旨在将**语料构建、数据采集、数据管理和实用工具**整合到一个统一、直观、高效的图形化平台中，让研究者能更专注于实验设计与数据分析本身。

无论您是进行田野调查、课堂实验，还是为个人项目构建语料库，PhonAcq Assistant 都将是您强大的研究伙伴。

## ✨ 功能特性

*   **🎛️ 多范式采集**: 支持标准的**文本-音频**采集（用于跟读、最小音对测试）和创新的**图文-音频**采集（用于方言调查、看图说话）。
*   **📋 强大的语料管理**:
    *   **Excel优先**: 支持从预设的Excel模板智能生成和转换词表，易于协作和管理。
    *   **内置编辑器**: 为标准词表和图文词表提供独立的、功能完备的内置编辑器。
    *   **智能辅助**: 图文词表编辑器支持“智能检测”，通过模糊匹配自动关联图片与项目ID。
    *   **完整快捷键支持**: 编辑器支持撤销/重做 (`Ctrl+Z/Y`)、删除 (`Delete`)、保存 (`Ctrl+S`) 等标准快捷键。
*   **🎧 灵活的提示音系统**:
    *   支持**在线TTS**（文本转语音）自动生成提示音。
    *   支持用户录制**高质量语音包**，程序将优先使用，保证音质和统一性。
*   **🔬 丰富的实验控制**:
    *   支持**随机**或**顺序**呈现词条。
    *   支持对分组词条进行**完整测试**或**部分抽样**。
    *   图文采集模式下，支持**动态显示/隐藏**文字描述和研究者备注。
*   **🖼️ 高级图片查看器**:
    *   在图文采集中，支持使用鼠标滚轮或触控板手势对图片进行**无级缩放**。
    *   支持使用鼠标左键**拖动**已放大的图片。
    *   智能边界限制，防止图片被拖出可视范围。
*   **🛠️ 实用的内置工具**:
    *   **拼音转IPA**: 内置强大的转换工具，支持多种IPA方案（标准、严式、宽式），并能根据上下文**自动处理复杂的普通话音变规则**（如“一”、“不”、上声变调、“啊”的变读），变调音节会自动用红色高亮显示。
*   **🎨 高度可定制化**:
    *   **主题系统**: 支持通过QSS样式表完全自定义程序外观。内置多款精心设计的浅色与深色主题。
    *   **参数设置**: 可自由配置音频参数、默认路径、TTS语言等。
*   **🚀 极致的用户体验**:
    *   **动态启动画面**: 双击程序后立即出现启动画面并显示真实加载进度，告别“白屏”等待。
    *   **非阻塞操作**: 所有耗时任务均在后台运行，确保界面始终流畅响应。
    *   **模块化架构**: 功能以模块形式存在，便于未来扩展和维护。

## 📥 安装与运行

### 1. 对于普通用户 (使用打包好的可执行文件)

1.  前往本项目的 [Releases](https://github.com/Kasumikitsune/PhonAcq-Assistant/releases) 页面。
2.  下载最新版本的压缩包（例如 `PhonAcq-Assistant-v4.0-Windows.zip`）。
3.  解压到一个您喜欢的位置。
4.  双击文件夹内的 `PhonAcq_Assistant.exe` 即可运行。

### 2. 对于开发者 (从源码运行)

1.  **安装 Git 和 Python**: 确保您的电脑上已安装 Git 和 Python (推荐 3.10+)。

2.  **克隆仓库**:
    ```bash
    git clone https://github.com/KasumiKitsune/PhonAcq-Assistant.git
    cd PhonAcq-Assistant
    ```

3.  **创建并激活虚拟环境 (推荐)**:
    ```bash
    # 创建虚拟环境
    python -m venv venv
    # 激活 (Windows)
    .\venv\Scripts\activate
    # 激活 (macOS/Linux)
    source venv/bin/activate
    ```

4.  **安装依赖**:
    ```bash
    pip install -r requirements.txt
    ```
    *(您需要创建一个 `requirements.txt` 文件，内容如下)*
    ```text
    PyQt5
    pandas
    openpyxl
    sounddevice
    soundfile
    numpy
    gTTS
    thefuzz
    python-Levenshtein
    pypinyin
    ```

5.  **运行程序**:
    ```bash
    python PhonAcq.py
    ```

## 🚀 快速入门

一个最快体验核心功能的流程如下：

1.  **启动程序**，进入 `语料管理 -> Excel 转换器` 标签页。
2.  在“生成模板”部分，选择 `单语言简洁模板`，点击“生成选中模板”。这会在 `word_lists` 文件夹下创建一个 `.xlsx` 文件。
3.  进入 `数据采集 -> 口音采集会话` 标签页。
4.  在“选择单词表”下拉框中，选择刚刚生成的 `1_单语言简洁模板.py`。
5.  在“被试者名称”中输入 `test_user`。
6.  点击“开始新会话”。程序会自动使用在线TTS生成提示音（如果您的网络通畅）。
7.  准备就绪后，点击“开始录制下一个”，根据提示音和屏幕文字朗读并录音。
8.  完成几个词条后，点击“结束当前会话”。
9.  进入 `语料管理 -> 数据管理器` 标签页。
10. 在左侧“口音采集会话”列表中，点击 `test_user`。右侧表格就会显示您刚刚录制的音频文件，双击即可试听。

恭喜您！您已经完成了一次基本的数据采集流程。

## 🧩 模块详解

### 数据采集
*   **口音采集会话**: 进行标准的“听-说”范式实验，适用于跟读任务。
*   **语音包录制**: 为标准词表录制高质量的真人提示音，作为TTS的替代品。

### 方言研究
*   **图文采集**: 进行“看-说”范式实验，通过展示图片来引导被试者产生自然方言语音。
*   **图文词表编辑**: 专属的编辑器，用于创建和管理包含图片、提示和备注的图文词表。

### 语料管理
*   **词表编辑器**: 编辑标准 `.py` 格式词表。
*   **Excel 转换器**: 从 `.xlsx` 文件生成标准词表。
*   **数据管理器**: 浏览、试听、管理所有采集到的音频数据。

### 实用工具
*   **拼音转IPA**: 一个强大的语言学工具，可将汉字转换为带有音变标记的国际音标。

### 系统与帮助
*   **程序设置**: 配置程序的主题、路径、音频参数等。
*   **帮助文档**: 您正在阅读的这份详细指南。

## 🎨 自定义与扩展

*   **自定义主题**: 您可以创建自己的 `.qss` 样式表，并将其放入 `themes/` 文件夹，即可在设置中选择。
*   **添加词表**: 直接在 `word_lists/` 或 `dialect_visual_wordlists/` 文件夹下创建新的 `.py` 或 `.xlsx` 文件。
*   **扩展功能**: 得益于模块化设计，您可以轻松地在 `modules/` 文件夹下创建新的 `.py` 模块来添加全新功能。只需在主程序 `PhonAcq.py` 中进行简单的集成即可。

## ❤️ 参与贡献

我们欢迎任何形式的贡献！无论是提交 bug 报告、建议新功能，还是直接贡献代码。

1.  **Fork** 本仓库。
2.  创建一个新的分支 (`git checkout -b feature/AmazingFeature`)。
3.  进行您的修改。
4.  提交您的更改 (`git commit -m 'Add some AmazingFeature'`)。
5.  将您的分支推送到远程仓库 (`git push origin feature/AmazingFeature`)。
6.  创建一个 **Pull Request**。

## 📜 许可证 (License)

本项目采用 [MIT 许可证](LICENSE.txt)。
